'use client'

import Link from 'next/link'
import { useEffect, useState } from 'react'

// P√°gina inicial com t√≠tulo destacado e texto informativo
export default function HomePage() {
  // Estado que indica se o utilizador est√° autenticado
  const [isLoggedIn, setIsLoggedIn] = useState(false)

  // Ao montar, verifica no localStorage se existe sess√£o ativa
  useEffect(() => {
    const session = localStorage.getItem('cm_session')
    try {
      const parsed = session ? JSON.parse(session) : null
      setIsLoggedIn(parsed?.loggedIn === true)
    } catch {
      setIsLoggedIn(false)
    }
  }, [])

  // Lista de caixas a apresentar na sec√ß√£o informativa
  const features = [
    {
      icon: 'üõ°Ô∏è',
      iconLabel: 'escudo',
      text:
        'Confian√ßa na equipa: Criado por especialistas em estudos de mercado, com experi√™ncia real em Cliente Mist√©rio em Portugal.',
    },
    {
      icon: 'üì±',
      iconLabel: 'telem√≥vel',
      text:
        'Flexibilidade total: 100% online ‚Äî faz o curso no telem√≥vel, tablet ou computador, ao teu ritmo.',
    },
    {
      icon: 'üöÄ',
      iconLabel: 'foguet√£o',
      text:
        'Resultados r√°pidos: Aprendizagem pr√°tica ‚Äî m√≥dulos curtos, exemplos reais, checklists e quizzes para passares da teoria √† a√ß√£o.',
    },
  ]

  return (
    <main>
      {/* Sec√ß√£o inicial com t√≠tulo e bot√£o de ades√£o */}
      <section className="flex flex-col items-center gap-8 text-center text-white">

        {/* Caixa branca transl√∫cida que se ajusta ao tamanho do conte√∫do */}
        <div className="w-fit rounded-lg bg-white/40 p-8">

          {/* Bloco com o t√≠tulo principal e bot√£o de ades√£o */}
          <div className="flex flex-col items-center justify-center space-y-8">
            {/* T√≠tulo principal com a fonte Saira Stencil One */}
            <h1 className="logo-font text-4xl font-bold leading-none md:text-8xl">
              <span className="block">CURSO</span>
              <span className="block">COMPLETO</span>
            </h1>
            {/* Frase descritiva colocada abaixo do t√≠tulo */}
            <p className="text-base">Avalia marcas, recebe dinheiro e acumula produtos.</p>

            {/* Bot√£o de ades√£o direciona para registo ou dashboard conforme sess√£o */}
            <Link
              href={isLoggedIn ? '/dashboard' : '/inscrever-se'}
              className="join-button"
            >
              Adere j√°!
            </Link>
          </div>
        </div>
      </section>

      {/* Sec√ß√£o informativa com tr√™s caixas e s√≠mbolos associados */}
      <section className="mt-12 grid gap-6 p-4 text-black md:grid-cols-3">
        {features.map((feature, index) => (
          <div
            key={index}
            className="flex flex-col items-center rounded-lg bg-white/40 p-6 text-center"
          >
            {/* S√≠mbolo representativo da caracter√≠stica */}
            <span
              role="img"
              aria-label={feature.iconLabel}
              className="mb-4 text-4xl"
            >
              {feature.icon}
            </span>
            {/* Texto descritivo da caracter√≠stica */}
            <p className="text-base">{feature.text}</p>
          </div>
        ))}
      </section>
    </main>
  )
}
